#################### APPLICATION BINDINGS #############################################
$terminal = uwsm app -- $TERMINAL
$browser = chromium
$mainMod = SUPER
$osdclient = swayosd-client --monitor "$(hyprctl monitors -j | jq -r '.[] | select(.focused == true).name')"

# UNBIND EXISTING SHORTCUTS
source = ~/.config/hypr/unbind_omarchy_defaults.conf

#################### BIND MY OWN KEYMAP #############################################

#################### Combined Keybinds ################################################
bindd = $mainMod, W, Toggle Binds Help, exec, ~/.config/hypr/scripts/which-key.sh -b

bindd = $mainMod, Q, Close active window, killactive,

bindd = $mainMod, left, Move focus left, movefocus, l
bindd = $mainMod, H, Move focus left, movefocus, l
bindd = $mainMod, right, Move focus right, movefocus, r
bindd = $mainMod, L, Move focus right, movefocus, r

bindd = $mainMod, code:10, Switch to workspace 1, workspace, 1
bindd = $mainMod, code:11, Switch to workspace 2, workspace, 2
bindd = $mainMod, code:12, Switch to workspace 3, workspace, 3
bindd = $mainMod, code:13, Switch to workspace 4, workspace, 4
bindd = $mainMod, code:14, Switch to workspace 5, workspace, 5
bindd = $mainMod, code:15, Switch to workspace 6, workspace, 6
bindd = $mainMod, code:16, Switch to workspace 7, workspace, 7
bindd = $mainMod, code:17, Switch to workspace 8, workspace, 8 
bindd = $mainMod, code:18, Switch to workspace 9, workspace, 9
bindd = $mainMod, code:19, Switch to workspace 0, workspace, 0

bindd = $mainMod SHIFT, code:10, Move window to workspace 1, movetoworkspace, 1
bindd = $mainMod SHIFT, code:11, Move window to workspace 2, movetoworkspace, 2
bindd = $mainMod SHIFT, code:12, Move window to workspace 3, movetoworkspace, 3
bindd = $mainMod SHIFT, code:13, Move window to workspace 4, movetoworkspace, 4
bindd = $mainMod SHIFT, code:14, Move window to workspace 5, movetoworkspace, 5
bindd = $mainMod SHIFT, code:15, Move window to workspace 6, movetoworkspace, 6
bindd = $mainMod SHIFT, code:16, Move window to workspace 7, movetoworkspace, 7
bindd = $mainMod SHIFT, code:17, Move window to workspace 8, movetoworkspace, 8
bindd = $mainMod SHIFT, code:18, Move window to workspace 9, movetoworkspace, 9
bindd = $mainMod SHIFT, code:19, Move window to workspace 0, movetoworkspace, 0

bindd = $mainMod, TAB, Next workspace, workspace, e+1
bindd = $mainMod SHIFT, TAB, Previous workspace, workspace, e-1
bindd = $mainMod CTRL, TAB, Former workspace, workspace, previous

bindd = $mainMod, mouse_down, Scroll active workspace forward, workspace, e+1
bindd = $mainMod, mouse_up, Scroll active workspace backward, workspace, e-1

bindmd = $mainMod, mouse:272, Move window, movewindow
bindmd = $mainMod, mouse:273, Resize window, resizewindow

bindd = $mainMod, E, Emoji picker, exec, walker -m Emojis
bindd = $mainMod, ESCAPE, Power menu, exec, omarchy-menu system

bindd = $mainMod, N, Dismiss all notifications, exec, makoctl dismiss --all

bindd = , PRINT, Screenshot of region, exec, omarchy-cmd-screenshot
bindd = SHIFT, PRINT, Screen record display with audio, exec, omarchy-cmd-screenrecord output audio

bindd = $mainMod, C, Color picker, exec, pkill hyprpicker || hyprpicker -a

#################### BASE LAYER Keybinds (copies combo ones) ################################################

bindr = SUPER, SUPER_L, submap, supmaper
submap = supmaper
bindd = , escape, Reset submap, submap, reset
bindd = , Q, Reset submap, submap, reset
bindd = , A, +apps, submap, apps
bindd = , R, +resize, submap, resize
bindd = , L, +layout, submap, layout
bindd = , S, +system, submap, system
bindd = , Q, Close active window, killactive,
bind = , Q, submap, reset
bindd = , left, Move focus left, movefocus, l
bind = , left, submap, reset
bindd = , H, Move focus left, movefocus, l
bind = , H, submap, reset
bindd = , right, Move focus right, movefocus, r
bind = , right, submap, reset
bindd = , L, Move focus right, movefocus, r
bind = , L, submap, reset
bindd = , code:10, Switch to workspace 1, workspace, 1
bind = , code:10, submap, reset
bindd = , code:11, Switch to workspace 2, workspace, 2
bind = , code:11, submap, reset
bindd = , code:12, Switch to workspace 3, workspace, 3
bind = , code:12, submap, reset
bindd = , code:13, Switch to workspace 4, workspace, 4
bind = , code:13, submap, reset
bindd = , code:14, Switch to workspace 5, workspace, 5
bind = , code:14, submap, reset
bindd = , code:15, Switch to workspace 6, workspace, 6
bind = , code:15, submap, reset
bindd = , code:16, Switch to workspace 7, workspace, 7
bind = , code:16, submap, reset
bindd = , code:17, Switch to workspace 8, workspace, 8 
bind = , code:17, submap, reset
bindd = , code:18, Switch to workspace 9, workspace, 9
bind = , code:18, submap, reset
bindd = , code:19, Switch to workspace 0, workspace, 0
bind = , code:19, submap, reset
bindd = SHIFT, code:10, Move window to workspace 1, movetoworkspace, 1
bind = SHIFT, code:10, submap, reset
bindd = SHIFT, code:11, Move window to workspace 2, movetoworkspace, 2
bind = SHIFT, code:11, submap, reset
bindd = SHIFT, code:12, Move window to workspace 3, movetoworkspace, 3
bind = SHIFT, code:12, submap, reset
bindd = SHIFT, code:13, Move window to workspace 4, movetoworkspace, 4
bind = SHIFT, code:13, submap, reset
bindd = SHIFT, code:14, Move window to workspace 5, movetoworkspace, 5
bind = SHIFT, code:14, submap, reset
bindd = SHIFT, code:15, Move window to workspace 6, movetoworkspace, 6
bind = SHIFT, code:15, submap, reset
bindd = SHIFT, code:16, Move window to workspace 7, movetoworkspace, 7
bind = SHIFT, code:16, submap, reset
bindd = SHIFT, code:17, Move window to workspace 8, movetoworkspace, 8
bind = SHIFT, code:17, submap, reset
bindd = SHIFT, code:18, Move window to workspace 9, movetoworkspace, 9
bind = SHIFT, code:18, submap, reset
bindd = SHIFT, code:19, Move window to workspace 0, movetoworkspace, 0
bind = SHIFT, code:19, submap, reset
bindd = , TAB, Next workspace, workspace, e+1
bind = , TAB, submap, reset
bindd = SHIFT, TAB, Previous workspace, workspace, e-1
bind = SHIFT, TAB, submap, reset
bindd = CTRL, TAB, Former workspace, workspace, previous
bind = CTRL, TAB, submap, reset
bindd = , E, Emoji picker, exec, walker -m Emojis
bind =  , E, submap, reset
bindd = , N, Dismiss all notifications, exec, makoctl dismiss --all
bind =  , N, submap, reset
bindd = , C, Color picker, exec, pkill hyprpicker || hyprpicker -a
bind =  , C, submap, reset
submap = reset

#################### Submap APPS ################################################
submap = apps
bindd = , A, Launch..., exec, walker
bind = , A, submap, reset
bindd = , P, Passwords, exec, omarchy-launch-webapp "https://passwords.google.com/"
bind = , P, submap, reset
bindd = , I, ChatGPT, exec, omarchy-launch-webapp "https://chatgpt.com"
bind = , I, submap, reset
bindd = , D, Discord, exec, omarchy-launch-webapp "https://discord.com/channels/@me"
bind = , D, submap, reset
bindd = , C, Calendar, exec, omarchy-launch-webapp "https://calendar.google.com/calendar"
bind = , C, submap, reset
bindd = , M, Email, exec, omarchy-launch-webapp "https://mail.google.com/mail"
bind = , M, submap, reset
bindd = SHIFT, M, Maps, exec, omarchy-launch-webapp "https://maps.google.com/"
bind = SHIFT, M, submap, reset
bindd = , Y, YouTube, exec, omarchy-launch-or-focus-webapp YouTube "https://youtube.com/"
bind = , Y, submap, reset
bindd = , T, Terminal, exec, $terminal --working-directory="$(omarchy-cmd-terminal-cwd)"
bind = , T, submap, reset
bindd = , E, File manager, exec, uwsm app -- nautilus --new-window
bind = , E, submap, reset
bindd = , B, Browser, exec, $browser
bind = , B, submap, reset
bindd = SHIFT, B, Browser (private), exec, $browser --private
bind = SHIFT, B, submap, reset
bindd = , S, Music, exec, omarchy-launch-or-focus spotify
bind = , S, submap, reset
bindd = , N, Editor, exec, omarchy-launch-editor
bind = , N, submap, reset
bindd = SHIFT, T, Activity, exec, $terminal -e btop
bind = SHIFT, T, submap, reset
bindd = SHIFT, D, Docker, exec, $terminal -e lazydocker
bind = SHIFT, D, submap, reset
bindd = , O, Obsidian, exec, omarchy-launch-or-focus obsidian "uwsm app -- obsidian -disable-gpu --enable-wayland-ime"
bind = , O, submap, reset
bind = , escape, submap, reset
bindd = , Q, Reset submap, submap, reset
submap = reset

#################### Submap system ################################################
submap = system
bind = , escape, submap, reset
bindd = , Q, Reset submap, submap, reset
bindd =, I, Toggle locking on idle, exec, omarchy-toggle-idle
bind = , I, submap, reset
bindd = , N, Toggle nightlight, exec, omarchy-toggle-nightlight
bind = , N, submap, reset
bindd = , S, Screenshot of region, exec, omarchy-cmd-screenshot
bind = , S, submap, reset
bindd = SHIFT, S, Screen record display with audio, exec, omarchy-cmd-screenrecord output audio
bind = SHIFT, S, submap, reset
bindd = , F, Share File, exec, omarchy-menu share
bind = , F, submap, reset
submap = reset

#################### Submap RESIZE ################################################
submap = resize
bind = , escape, submap, reset
bindd = , Q, Reset submap, submap, reset
binded = , H, Resize Left, resizeactive,-50 0
binded = , L, Resize Right, resizeactive,50 0
binded = , K, Resize Up, resizeactive,0 -50
binded = , J, Resize Down, resizeactive,0 50
binded = , left, Resize Left, resizeactive,-50 0
binded = , right, Resize Right, resizeactive,50 0
binded = , up, Resize Up, resizeactive,0 -50
binded = , down, Resize Down, resizeactive,0 50
submap = reset

#################### Submap TOGGLE ################################################
submap = layout
bind = , escape, submap, reset
bindd = , Q, Reset submap, submap, reset
# Toggle Floating / Tiling
bindd = , F, Floating, togglefloating
bind = , F, submap, reset
# Fullscreen
bindd = , B, Fullscreen, fullscreen
bind = , B, submap, reset
# Toggle Split between vertical / horizontal
bindd = , J, Toggle Split, togglesplit
bind = , J, submap, reset
bindd = , W, Toggle Waybar, exec, omarchy-toggle-waybar
bind = , W, submap, reset
bindd = , T, Toggle transparency, exec, hyprctl dispatch setprop "address:$(hyprctl activewindow -j | jq -r '.address')" opaque toggle
bind = , T, submap, reset
submap = reset

#################### PLUGIN MANAGEMENT ################################################

plugin {
  hyprhook {
    onSubmap = ~/.config/hypr/scripts/which-key.sh
  }
}

# Triggers plugin loading on startup
exec-once = hyprpm reload
